<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Airlines Search Resulft</title>
    <link href="/css/flightSearchResult.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="content">
    <div class="nav"
         style=" box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.2); padding-bottom: 15px; background-color: white; width: 1700px; height: 73px;  text-align: center; position:fixed; top: 0px;">

        <ul class="" style="list-style-type:none;">
            <li class="">
                <!-- 타임리프의 security이용
                sec:authorize="isAnonymous()은 로그인하지않는 경우->로그인 출력
                sec:authorize="isAuthenticated()은 로그인한 경유->로그아웃 출력
                -->
                <a class="logo" th:href="@{/}"><img src="/img/logo.png"
                                                    style="float: left; width: 63px; height: 58px; margin-left: 10px; background-repeat: no-repeat;"></a>
                <div class="nav-left"
                     style="float:left;   margin-left: 470px; margin-top: 19px;  font-size: 20px;  font-family: 'Roboto', sans-serif; font-weight: 500;">
                    <a class="" th:href="@{/}"
                       style="margin-right: 50px; color:#4F54B4;">HOME</a>
                    <a class="" th:href="@{/}"
                       style="margin-right: 50px; color:#4F54B4;">AIRPORT</a>
                    <a class="" th:href="@{/}"
                       style="margin-right: 50px; color:#4F54B4;">START PLAN</a>
                    <a class="" th:href="@{/}"
                       style="color:#4F54B4;">RECOMMEND</a>
                </div>
                <div class="nav-right"
                     style="float:right;    margin-right: 35px; margin-top: 27px;  font-size: 12px;  font-family: 'Roboto', sans-serif; font-weight: 600;">
                    <a class="" th:href="@{/}"
                       style="margin-right: 20px; color:#4F54B4;">고객센터</a>
                    <a class="loginBtn" sec:authorize="isAnonymous()" th:href="@{/login}"
                       style="margin-right: 20px; color:#4F54B4;">로그인</a>
                    <a class="" sec:authorize="isAuthenticated()" th:href="@{/}"
                       style="margin-right: 20px; color:#4F54B4;">마이페이지</a>
                    <a class="" sec:authorize="isAuthenticated()" th:href="@{/}"
                       style="margin-right: 20px; color:#4F54B4;">로그아웃</a>
                    <a class="" sec:authorize="hasRole('ADMIN')" th:href="@{/}"
                       style="color:#4F54B4;">ADMIN</a>
                </div>
            </li>

        </ul>
        <div>

        </div>
    </div>
    <!-- nav끝   -->
    <div class="navEmptyBox">

    </div>
    <div class="searchBox">

    </div>
    <div class="resultBox">
        <div class="resultBoxLeft">
            <label style="font-size: 20px; margin: 10px;">항공사</label>
            <div class="airlineOption">
                <input type="checkbox" id="selectAllAirlines" checked>
                <label for="selectAllAirlines">항공사 전체 선택/해제</label>
            </div>
            <div id="airlines-container"></div>
        </div>
        <div class="resultBoxRight">
            <th:block th:each="flight, iterStat : ${flights}">
                <form action="#" th:action="@{/bookFlight}" method="post" th:id="'flightForm' + ${iterStat.index}">
                    <input type="hidden" th:name="'routes[0].airlineName'" th:value="${flight.routes[0].airlineName}" />
                    <input type="hidden" th:name="'routes[0].departureTime'" th:value="${flight.routes[0].departureTime}" />
                    <input type="hidden" th:name="'routes[0].departureAirport'" th:value="${flight.routes[0].departureAirport}" />
                    <input type="hidden" th:name="'routes[0].arrivalTime'" th:value="${flight.routes[0].arrivalTime}" />
                    <input type="hidden" th:name="'routes[0].arrivalAirport'" th:value="${flight.routes[0].arrivalAirport}" />
                    <input type="hidden" th:name="'routes[0].duration'" th:value="${flight.routes[0].duration}" />
                    <input type="hidden" th:name="routes[0].airlineImg" th:value="${flight.routes[0].airlineImg}" />

                    <input type="hidden" th:name="'routes[1].airlineName'" th:value="${flight.routes[1].airlineName}" />
                    <input type="hidden" th:name="'routes[1].departureTime'" th:value="${flight.routes[1].departureTime}" />
                    <input type="hidden" th:name="'routes[1].departureAirport'" th:value="${flight.routes[1].departureAirport}" />
                    <input type="hidden" th:name="'routes[1].arrivalTime'" th:value="${flight.routes[1].arrivalTime}" />
                    <input type="hidden" th:name="'routes[1].arrivalAirport'" th:value="${flight.routes[1].arrivalAirport}" />
                    <input type="hidden" th:name="'routes[1].duration'" th:value="${flight.routes[1].duration}" />
                    <input type="hidden" th:name="routes[1].airlineImg" th:value="${flight.routes[1].airlineImg}" />

                    <input type="hidden" th:name="price" th:value="${flight.price}" />

                    <input type="hidden" name="departureDate" th:value="${departureDate}" />
                    <input type="hidden" name="arrivalDate" th:value="${arrivalDate}" />
                    <div class="flight-box-wrapper">
                        <table>
                            <!-- 첫 번째 루트 (편도) -->
                            <tr>
                                <td><div class="Airline">
                                    <span><img th:src="${flight.routes[0].airlineImg}" alt="${flight.routes[0].airlineName}" width="50"></span><br>
                                    <span class="airlineName" th:text="${flight.routes[0].airlineName}"></span>
                                </div></td>
                                <td><div class="depart">
                                    <span th:text="${flight.routes[0].departureTime}"></span>
                                    <span th:text="${flight.routes[0].departureAirport}"></span>
                                </div></td>
                                <td><div class="center-content">
                                        <span class="duration" th:text="${flight.routes[0].duration}"></span><img src="/img/flight/plane.png">
                                </div></td>
                                <td><div class="arrive">
                                    <span th:text="${flight.routes[0].arrivalTime}"></span>
                                    <span th:text="${flight.routes[0].arrivalAirport}"></span>
                                </div></td>
                                <td rowspan="2" class="price"><div class="money">
                                    <span th:text="|₩${flight.price}|"></span>
                                    <span><button class="book-btn" onclick="bookFlightInfo(this)">선택하기&#8594;</button></span>
                                    </div>
                                </td>
                            </tr>
                            <!-- 두 번째 루트 (복귀) -->
                            <tr>
                                <td><div class="Airline">
                                    <span><img th:src="${flight.routes[1].airlineImg}" alt="${flight.routes[1].airlineName}" width="50"></span><br>
                                    <span class="airlineName" th:text="${flight.routes[1].airlineName}"></span>
                                </div></td>
                                <td><div class="depart">
                                    <span th:text="${flight.routes[1].departureTime}"></span>
                                    <span th:text="${flight.routes[1].departureAirport}"></span>
                                </div></td>
                                <td><div class="center-content">
                                        <span class="duration" th:text="${flight.routes[1].duration}"></span><img src="/img/flight/plane.png">
                                </div></td>
                                <td><div class="arrive">
                                    <span th:text="${flight.routes[1].arrivalTime}"></span>
                                    <span th:text="${flight.routes[1].arrivalAirport}"></span>
                                </div></td>
                            </tr>
                        </table>
                    </div>
                </form>
            </th:block>
        </div>
    </div>
</div>
<script src="/js/flightSearchResult.js"></script>
</body>
</html>
